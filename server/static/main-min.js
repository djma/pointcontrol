function getData(e){0!=e&&(weapon=$("input[name=optionsWeapons]:checked","#fencerform").val(),$(".loading-image").show(),$.getJSON("get?id="+e+"&weapon="+weapon,function(t){$.getJSON("translate?id="+e,function(a){name=a.name,currentId=e,drawBasic(t,name),$(".loading-image").hide()})}))}function drawBasic(e,t){if(dateseen={},rows=[],fencer_name=t,console.log(fencer_name),0!=e)for(i=0;i<e.ratings.length;i++)e.ratings[i].date in dateseen||(dateseen[e.ratings[i].date]=1,rows.push([Date.parse(e.ratings[i].date),e.ratings[i].rating]));latest_rank=0,0!=rows.length&&(latest_rank=rows[rows.length-1][1]),$("#container").highcharts({credits:{enabled:!1},chart:{type:"line"},title:{text:""},subtitle:{text:fencer_name+" - "+latest_rank.toFixed(2)+" - "+e.weapon,style:{fontSize:"32px"}},xAxis:{type:"datetime",dateTimeLabelFormats:{},title:{text:"Date"}},yAxis:{title:{text:"Rating"}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.2f}"},plotOptions:{series:{cursor:"pointer",marker:{enabled:!0},point:{events:{click:function(){console.log(this)}}}}},series:[{name:fencer_name,data:rows}]})}function drawFrame(){rows=[],$("#container").highcharts({credits:{enabled:!1},chart:{type:"line"},title:{text:""},subtitle:{text:""},xAxis:{type:"datetime",dateTimeLabelFormats:{},title:{text:"Date"}},yAxis:{title:{text:"Rating"}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.2f}"},plotOptions:{series:{cursor:"pointer",marker:{enabled:!0}}},series:[{name:"Example",data:rows}]})}function displayNames(e){for($("#title_thing").text("Click on the correct fencer..."),$("#subtitle_thing").text("Full Name - Birth Year - Last Tournament"),$("h3").empty(),i=0;i<e.length;i++)$("#title_box").append('<h3 id="'+e[i].id+'">'+e[i].fullname+" - "+e[i].birthyear+" - "+e[i].t_date+"</h3>");$("h3").click(function(){getData($(this).attr("id"))})}currentId=0,$(document).ready(function(){drawFrame(),$(".pure-radio").click(function(){getData(currentId)})}),$("#fencerform").submit(function(e){value_string=$("#fenceridinput").val(),isNaN(value_string)?(value_name=$.trim(value_string),$(".loading-image").show(),$.getJSON("name?q="+value_name,function(e){console.log(e),displayNames(e),$(".loading-image").hide()})):getData(parseInt(value_string)),e.preventDefault()});
